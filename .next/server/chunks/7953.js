"use strict";exports.id=7953,exports.ids=[7953],exports.modules={77953:(e,t,n)=>{n.d(t,{getDefaultRoleAssumer:()=>ni,getDefaultRoleAssumerWithWebIdentity:()=>no});var r=n(75893),s=n(48787),i=n(39539);let o=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),a={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class l extends i.sI{constructor(e){super(e),Object.setPrototypeOf(this,l.prototype)}}class d extends l{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,d.prototype)}}class c extends l{constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,c.prototype)}}class u extends l{constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,u.prototype)}}class p extends l{constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,p.prototype)}}class h extends l{constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,h.prototype)}}class m extends l{constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,m.prototype)}}class f extends l{constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,f.prototype)}}class g extends l{constructor(e){super({name:"InvalidAuthorizationMessageException",$fault:"client",...e}),this.name="InvalidAuthorizationMessageException",this.$fault="client",Object.setPrototypeOf(this,g.prototype)}}let y=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:i.oc}}),P=e=>({...e,...e.Credentials&&{Credentials:y(e.Credentials)}}),v=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:i.oc}}),w=e=>({...e,...e.Credentials&&{Credentials:y(e.Credentials)}});var b=n(44547),S=n(98957);let E=(e,t)=>(0,S.J)(e,t).then(e=>{if(e.length){let t;let n=new b.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>""===t.trim()&&t.includes("\n")?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10","\n");try{t=n.parse(e,!0)}catch(t){throw t&&"object"==typeof t&&Object.defineProperty(t,"$responseBodyText",{value:e}),t}let r="#text",s=Object.keys(t)[0],o=t[s];return o[r]&&(o[s]=o[r],delete o[r]),(0,i.sT)(o)}return{}}),A=async(e,t)=>{let n=await E(e,t);return n.Error&&(n.Error.message=n.Error.message??n.Error.Message),n};var I=n(41966);let x=async(e,t)=>{let n;return n=eN({...H(e,t),[eu]:eh,[eV]:ec}),el(t,ed,"/",void 0,n)},k=async(e,t)=>{let n;return n=eN({...Y(e,t),[eu]:eg,[eV]:ec}),el(t,ed,"/",void 0,n)},C=async(e,t)=>{if(e.statusCode>=300)return D(e,t);let n=await E(e.body,t),r={};return r=_(n.AssumeRoleResult,t),{$metadata:eo(e),...r}},R=async(e,t)=>{if(e.statusCode>=300)return D(e,t);let n=await E(e.body,t),r={};return r=J(n.AssumeRoleWithWebIdentityResult,t),{$metadata:eo(e),...r}},D=async(e,t)=>{let n={...e,body:await A(e.body,t)},r=eB(e,n.body);switch(r){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await T(n,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await z(n,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await K(n,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await M(n,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await O(n,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await W(n,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await $(n,t);case"InvalidAuthorizationMessageException":case"com.amazonaws.sts#InvalidAuthorizationMessageException":throw await j(n,t);default:return ea({output:e,parsedBody:n.body.Error,errorCode:r})}},T=async(e,t)=>{let n=e.body,r=Z(n.Error,t),s=new d({$metadata:eo(e),...r});return(0,i.to)(s,n)},$=async(e,t)=>{let n=e.body,r=Q(n.Error,t),s=new f({$metadata:eo(e),...r});return(0,i.to)(s,n)},O=async(e,t)=>{let n=e.body,r=ee(n.Error,t),s=new h({$metadata:eo(e),...r});return(0,i.to)(s,n)},j=async(e,t)=>{let n=e.body,r=et(n.Error,t),s=new g({$metadata:eo(e),...r});return(0,i.to)(s,n)},W=async(e,t)=>{let n=e.body,r=en(n.Error,t),s=new m({$metadata:eo(e),...r});return(0,i.to)(s,n)},z=async(e,t)=>{let n=e.body,r=er(n.Error,t),s=new c({$metadata:eo(e),...r});return(0,i.to)(s,n)},K=async(e,t)=>{let n=e.body,r=es(n.Error,t),s=new u({$metadata:eo(e),...r});return(0,i.to)(s,n)},M=async(e,t)=>{let n=e.body,r=ei(n.Error,t),s=new p({$metadata:eo(e),...r});return(0,i.to)(s,n)},H=(e,t)=>{let n={};if(null!=e[e$]&&(n[e$]=e[e$]),null!=e[eO]&&(n[eO]=e[eO]),null!=e[ex]){let r=F(e[ex],t);e[ex]?.length===0&&(n.PolicyArns=[]),Object.entries(r).forEach(([e,t])=>{n[`PolicyArns.${e}`]=t})}if(null!=e[eI]&&(n[eI]=e[eI]),null!=e[eb]&&(n[eb]=e[eb]),null!=e[eH]){let r=N(e[eH],t);e[eH]?.length===0&&(n.Tags=[]),Object.entries(r).forEach(([e,t])=>{n[`Tags.${e}`]=t})}if(null!=e[eF]){let r=L(e[eF],t);e[eF]?.length===0&&(n.TransitiveTagKeys=[]),Object.entries(r).forEach(([e,t])=>{n[`TransitiveTagKeys.${e}`]=t})}if(null!=e[eE]&&(n[eE]=e[eE]),null!=e[eK]&&(n[eK]=e[eK]),null!=e[eY]&&(n[eY]=e[eY]),null!=e[ez]&&(n[ez]=e[ez]),null!=e[eC]){let r=U(e[eC],t);e[eC]?.length===0&&(n.ProvidedContexts=[]),Object.entries(r).forEach(([e,t])=>{n[`ProvidedContexts.${e}`]=t})}return n},Y=(e,t)=>{let n={};if(null!=e[e$]&&(n[e$]=e[e$]),null!=e[eO]&&(n[eO]=e[eO]),null!=e[eU]&&(n[eU]=e[eU]),null!=e[eR]&&(n[eR]=e[eR]),null!=e[ex]){let r=F(e[ex],t);e[ex]?.length===0&&(n.PolicyArns=[]),Object.entries(r).forEach(([e,t])=>{n[`PolicyArns.${e}`]=t})}return null!=e[eI]&&(n[eI]=e[eI]),null!=e[eb]&&(n[eb]=e[eb]),n},F=(e,t)=>{let n={},r=1;for(let s of e)null!==s&&(Object.entries(V(s,t)).forEach(([e,t])=>{n[`member.${r}.${e}`]=t}),r++);return n},V=(e,t)=>{let n={};return null!=e[eG]&&(n[eG]=e[eG]),n},q=(e,t)=>{let n={};return null!=e[ek]&&(n[ek]=e[ek]),null!=e[ew]&&(n[ew]=e[ew]),n},U=(e,t)=>{let n={},r=1;for(let s of e)null!==s&&(Object.entries(q(s,t)).forEach(([e,t])=>{n[`member.${r}.${e}`]=t}),r++);return n},G=(e,t)=>{let n={};return null!=e[eA]&&(n[eA]=e[eA]),null!=e[eq]&&(n[eq]=e[eq]),n},L=(e,t)=>{let n={},r=1;for(let t of e)null!==t&&(n[`member.${r}`]=t,r++);return n},N=(e,t)=>{let n={},r=1;for(let s of e)null!==s&&(Object.entries(G(s,t)).forEach(([e,t])=>{n[`member.${r}.${e}`]=t}),r++);return n},B=(e,t)=>{let n={};return null!=e[em]&&(n[em]=(0,i.pY)(e[em])),null!=e[ey]&&(n[ey]=(0,i.pY)(e[ey])),n},_=(e,t)=>{let n={};return null!=e[ev]&&(n[ev]=X(e[ev],t)),null!=e[ef]&&(n[ef]=B(e[ef],t)),null!=e[eD]&&(n[eD]=(0,i.AF)(e[eD])),null!=e[ez]&&(n[ez]=(0,i.pY)(e[ez])),n},J=(e,t)=>{let n={};return null!=e[ev]&&(n[ev]=X(e[ev],t)),null!=e[eW]&&(n[eW]=(0,i.pY)(e[eW])),null!=e[ef]&&(n[ef]=B(e[ef],t)),null!=e[eD]&&(n[eD]=(0,i.AF)(e[eD])),null!=e[eT]&&(n[eT]=(0,i.pY)(e[eT])),null!=e[eP]&&(n[eP]=(0,i.pY)(e[eP])),null!=e[ez]&&(n[ez]=(0,i.pY)(e[ez])),n},X=(e,t)=>{let n={};return null!=e[ep]&&(n[ep]=(0,i.pY)(e[ep])),null!=e[ej]&&(n[ej]=(0,i.pY)(e[ej])),null!=e[eM]&&(n[eM]=(0,i.pY)(e[eM])),null!=e[eS]&&(n[eS]=(0,i.CE)((0,i.aH)(e[eS]))),n},Z=(e,t)=>{let n={};return null!=e[eL]&&(n[eL]=(0,i.pY)(e[eL])),n},Q=(e,t)=>{let n={};return null!=e[eL]&&(n[eL]=(0,i.pY)(e[eL])),n},ee=(e,t)=>{let n={};return null!=e[eL]&&(n[eL]=(0,i.pY)(e[eL])),n},et=(e,t)=>{let n={};return null!=e[eL]&&(n[eL]=(0,i.pY)(e[eL])),n},en=(e,t)=>{let n={};return null!=e[eL]&&(n[eL]=(0,i.pY)(e[eL])),n},er=(e,t)=>{let n={};return null!=e[eL]&&(n[eL]=(0,i.pY)(e[eL])),n},es=(e,t)=>{let n={};return null!=e[eL]&&(n[eL]=(0,i.pY)(e[eL])),n},ei=(e,t)=>{let n={};return null!=e[eL]&&(n[eL]=(0,i.pY)(e[eL])),n},eo=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),ea=(0,i.PC)(l),el=async(e,t,n,r,s)=>{let{hostname:i,protocol:o="https",port:a,path:l}=await e.endpoint(),d={protocol:o,hostname:i,port:a,method:"POST",path:l.endsWith("/")?l.slice(0,-1)+n:l+n,headers:t};return void 0!==r&&(d.hostname=r),void 0!==s&&(d.body=s),new I.aW(d)},ed={"content-type":"application/x-www-form-urlencoded"},ec="2011-06-15",eu="Action",ep="AccessKeyId",eh="AssumeRole",em="AssumedRoleId",ef="AssumedRoleUser",eg="AssumeRoleWithWebIdentity",ey="Arn",eP="Audience",ev="Credentials",ew="ContextAssertion",eb="DurationSeconds",eS="Expiration",eE="ExternalId",eA="Key",eI="Policy",ex="PolicyArns",ek="ProviderArn",eC="ProvidedContexts",eR="ProviderId",eD="PackedPolicySize",eT="Provider",e$="RoleArn",eO="RoleSessionName",ej="SecretAccessKey",eW="SubjectFromWebIdentityToken",ez="SourceIdentity",eK="SerialNumber",eM="SessionToken",eH="Tags",eY="TokenCode",eF="TransitiveTagKeys",eV="Version",eq="Value",eU="WebIdentityToken",eG="arn",eL="message",eN=e=>Object.entries(e).map(([e,t])=>(0,i.jc)(e)+"="+(0,i.jc)(t)).join("&"),eB=(e,t)=>t.Error?.Code!==void 0?t.Error.Code:404==e.statusCode?"NotFound":void 0;class e_ extends i.mY.classBuilder().ep({...a}).m(function(e,t,n,i){return[(0,s.p2)(n,this.serialize,this.deserialize),(0,r.a3)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,P).ser(x).de(C).build(){}class eJ extends i.mY.classBuilder().ep({...a}).m(function(e,t,n,i){return[(0,s.p2)(n,this.serialize,this.deserialize),(0,r.a3)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(v,w).ser(k).de(R).build(){}let eX="us-east-1",eZ=async(e,t,n)=>{let r="function"==typeof e?await e():e,s="function"==typeof t?await t():t;return n?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${r} (provider)`,`${s} (parent client)`,`${eX} (STS default)`),r??s??eX},eQ=(e,t)=>{let n,r;return async(s,i)=>{if(r=s,!n){let{logger:s=e?.parentClientConfig?.logger,region:i,requestHandler:o=e?.parentClientConfig?.requestHandler,credentialProviderLogger:a}=e;n=new t({credentialDefaultProvider:()=>async()=>r,region:await eZ(i,e?.parentClientConfig?.region,a),requestHandler:o,logger:s})}let{Credentials:o}=await n.send(new e_(i));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw Error(`Invalid response from STS.assumeRole call with role ${i.RoleArn}`);return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,credentialScope:o.CredentialScope}}},e0=(e,t)=>{let n;return async r=>{if(!n){let{logger:r=e?.parentClientConfig?.logger,region:s,requestHandler:i=e?.parentClientConfig?.requestHandler,credentialProviderLogger:o}=e;n=new t({region:await eZ(s,e?.parentClientConfig?.region,o),requestHandler:i,logger:r})}let{Credentials:s}=await n.send(new eJ(r));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${r.RoleArn}`);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,credentialScope:s.CredentialScope}}};var e1=n(24046),e2=n(58158),e4=n(84119),e9=n(16596),e5=n(27337),e3=n(71424),e6=n(64339),e7=n(51812),e8=n(94185),te=n(39701);let tt=async(e,t,n)=>({operation:(0,te.J)(t).operation,region:await (0,te.$)(e.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),tn=e=>{let t=[];switch(e.operation){case"AssumeRoleWithSAML":case"AssumeRoleWithWebIdentity":t.push({schemeId:"smithy.api#noAuth"});break;default:t.push({schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})})}return t},tr=e=>({...e,stsClientCtor:nr}),ts=e=>{let t=tr(e);return{...(0,e8.K)(t)}},ti={i8:"3.590.0"};var to=n(77742),ta=n(74376),tl=n(94032),td=n(97110),tc=n(39435);let tu=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:s,fromInstanceMetadata:i}=await n.e(9021).then(n.bind(n,89021));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:t}=await n.e(7356).then(n.bind(n,57356));return(0,td.tS)(t(e),s(e))}return process.env.AWS_EC2_METADATA_DISABLED?async()=>{throw new td.mV("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),i(e))},tp=(e={})=>(0,td.HP)((0,td.tS)(...e.profile||process.env[tc.TH]?[]:[async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),(0,tl.fromEnv)(e)())],async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:s,ssoRoleName:i,ssoSession:o}=e;if(!t&&!r&&!s&&!i&&!o)throw new td.mV("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:a}=await n.e(7112).then(n.bind(n,97112));return a(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:t}=await n.e(3919).then(n.bind(n,53919));return t(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:t}=await n.e(9002).then(n.bind(n,9002));return t(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:t}=await n.e(6820).then(n.bind(n,96820));return t(e)()},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await tu(e))()),async()=>{throw new td.mV("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}),tm,th),th=e=>e?.expiration!==void 0,tm=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;var tf=n(80442),tg=n(40804),ty=n(47302),tP=n(41056),tv=n(72282),tw=n(96602),tb=n(96636),tS=n(55898),tE=n(13571),tA=n(95592),tI=n(46293);let tx="required",tk="type",tC="argv",tR="booleanEquals",tD="stringEquals",tT="sigv4",t$="us-east-1",tO="endpoint",tj="https://sts.{Region}.{PartitionResult#dnsSuffix}",tW="tree",tz="error",tK="getAttr",tM={[tx]:!1,[tk]:"String"},tH={[tx]:!0,default:!1,[tk]:"Boolean"},tY={ref:"Endpoint"},tF={fn:"isSet",[tC]:[{ref:"Region"}]},tV={ref:"Region"},tq={fn:"aws.partition",[tC]:[tV],assign:"PartitionResult"},tU={ref:"UseFIPS"},tG={ref:"UseDualStack"},tL={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:tT,signingName:"sts",signingRegion:t$}]},headers:{}},tN={},tB={conditions:[{fn:tD,[tC]:[tV,"aws-global"]}],[tO]:tL,[tk]:tO},t_={fn:tR,[tC]:[tU,!0]},tJ={fn:tR,[tC]:[tG,!0]},tX={fn:tK,[tC]:[{ref:"PartitionResult"},"supportsFIPS"]},tZ={ref:"PartitionResult"},tQ={fn:tR,[tC]:[!0,{fn:tK,[tC]:[tZ,"supportsDualStack"]}]},t0=[{fn:"isSet",[tC]:[tY]}],t1=[t_],t2=[tJ],t4={version:"1.0",parameters:{Region:tM,UseDualStack:tH,UseFIPS:tH,Endpoint:tM,UseGlobalEndpoint:tH},rules:[{conditions:[{fn:tR,[tC]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[tC]:t0},tF,tq,{fn:tR,[tC]:[tU,!1]},{fn:tR,[tC]:[tG,!1]}],rules:[{conditions:[{fn:tD,[tC]:[tV,"ap-northeast-1"]}],endpoint:tL,[tk]:tO},{conditions:[{fn:tD,[tC]:[tV,"ap-south-1"]}],endpoint:tL,[tk]:tO},{conditions:[{fn:tD,[tC]:[tV,"ap-southeast-1"]}],endpoint:tL,[tk]:tO},{conditions:[{fn:tD,[tC]:[tV,"ap-southeast-2"]}],endpoint:tL,[tk]:tO},tB,{conditions:[{fn:tD,[tC]:[tV,"ca-central-1"]}],endpoint:tL,[tk]:tO},{conditions:[{fn:tD,[tC]:[tV,"eu-central-1"]}],endpoint:tL,[tk]:tO},{conditions:[{fn:tD,[tC]:[tV,"eu-north-1"]}],endpoint:tL,[tk]:tO},{conditions:[{fn:tD,[tC]:[tV,"eu-west-1"]}],endpoint:tL,[tk]:tO},{conditions:[{fn:tD,[tC]:[tV,"eu-west-2"]}],endpoint:tL,[tk]:tO},{conditions:[{fn:tD,[tC]:[tV,"eu-west-3"]}],endpoint:tL,[tk]:tO},{conditions:[{fn:tD,[tC]:[tV,"sa-east-1"]}],endpoint:tL,[tk]:tO},{conditions:[{fn:tD,[tC]:[tV,t$]}],endpoint:tL,[tk]:tO},{conditions:[{fn:tD,[tC]:[tV,"us-east-2"]}],endpoint:tL,[tk]:tO},{conditions:[{fn:tD,[tC]:[tV,"us-west-1"]}],endpoint:tL,[tk]:tO},{conditions:[{fn:tD,[tC]:[tV,"us-west-2"]}],endpoint:tL,[tk]:tO},{endpoint:{url:tj,properties:{authSchemes:[{name:tT,signingName:"sts",signingRegion:"{Region}"}]},headers:tN},[tk]:tO}],[tk]:tW},{conditions:t0,rules:[{conditions:t1,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[tk]:tz},{conditions:t2,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[tk]:tz},{endpoint:{url:tY,properties:tN,headers:tN},[tk]:tO}],[tk]:tW},{conditions:[tF],rules:[{conditions:[tq],rules:[{conditions:[t_,tJ],rules:[{conditions:[{fn:tR,[tC]:[!0,tX]},tQ],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:tN,headers:tN},[tk]:tO}],[tk]:tW},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[tk]:tz}],[tk]:tW},{conditions:t1,rules:[{conditions:[{fn:tR,[tC]:[tX,!0]}],rules:[{conditions:[{fn:tD,[tC]:[{fn:tK,[tC]:[tZ,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:tN,headers:tN},[tk]:tO},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:tN,headers:tN},[tk]:tO}],[tk]:tW},{error:"FIPS is enabled but this partition does not support FIPS",[tk]:tz}],[tk]:tW},{conditions:t2,rules:[{conditions:[tQ],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:tN,headers:tN},[tk]:tO}],[tk]:tW},{error:"DualStack is enabled but this partition does not support DualStack",[tk]:tz}],[tk]:tW},tB,{endpoint:{url:tj,properties:tN,headers:tN},[tk]:tO}],[tk]:tW}],[tk]:tW},{error:"Invalid Configuration: Missing Region",[tk]:tz}]},t9=(e,t={})=>(0,tI.B1)(t4,{endpointParams:e,logger:t.logger});tI.DY.aws=tA.Iu;let t5=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??tS.G,base64Encoder:e?.base64Encoder??tS.s,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??t9,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??tn,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new ta.V},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new e3.oH}],logger:e?.logger??new i.vk,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??tb.e,utf8Decoder:e?.utf8Decoder??tE.$x,utf8Encoder:e?.utf8Encoder??tE.GZ});var t3=n(46608);let t6=e=>{(0,i.H_)(process.version);let t=(0,t3.j)(e),n=()=>t().then(i.jv),r=t5(e);return(0,to.H)(process.version),{...r,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??tv.W,credentialDefaultProvider:e?.credentialDefaultProvider??tp,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,tf.fV)({serviceId:r.serviceId,clientVersion:ti.i8}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4")||(async e=>await tp(e?.__config||{})()),signer:new ta.V},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new e3.oH}],maxAttempts:e?.maxAttempts??(0,ty.M)(e7.Hs),region:e?.region??(0,ty.M)(e5._c,e5.zb),requestHandler:tP.NA.create(e?.requestHandler??n),retryMode:e?.retryMode??(0,ty.M)({...e7.aK,default:async()=>(await n()).retryMode||tw.CA}),sha256:e?.sha256??tg.k.bind(null,"sha256"),streamCollector:e?.streamCollector??tP.CF,useDualstackEndpoint:e?.useDualstackEndpoint??(0,ty.M)(e5.G7),useFipsEndpoint:e?.useFipsEndpoint??(0,ty.M)(e5.NL)}};var t7=n(35903);let t8=e=>{let t=e.httpAuthSchemes,n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(e){let n=t.findIndex(t=>t.schemeId===e.schemeId);-1===n?t.push(e):t.splice(n,1,e)},httpAuthSchemes:()=>t,setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider:()=>n,setCredentials(e){r=e},credentials:()=>r}},ne=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),nt=e=>e,nn=(e,t)=>{let n={...nt((0,t7.GW)(e)),...nt((0,i.kE)(e)),...nt((0,I.cA)(e)),...nt(t8(e))};return t.forEach(e=>e.configure(n)),{...e,...(0,t7.A1)(n),...(0,i.SQ)(n),...(0,I.AO)(n),...ne(n)}};class nr extends i.KU{constructor(...[e]){let t=o(t6(e||{})),n=(0,e5.Xb)(t),s=(0,r.uW)(n),i=(0,e7.BC)(s),a=(0,e1.S8)(i),l=nn(ts((0,e9.er)(a)),e?.extensions||[]);super(l),this.config=l,this.middlewareStack.use((0,e7.NQ)(this.config)),this.middlewareStack.use((0,e6.VG)(this.config)),this.middlewareStack.use((0,e1.G2)(this.config)),this.middlewareStack.use((0,e2.cV)(this.config)),this.middlewareStack.use((0,e4.eV)(this.config)),this.middlewareStack.use((0,e9.XJ)(this.config)),this.middlewareStack.use((0,e3.tZ)(this.config,{httpAuthSchemeParametersProvider:this.getDefaultHttpAuthSchemeParametersProvider(),identityProviderConfigProvider:this.getIdentityProviderConfigProvider()})),this.middlewareStack.use((0,e3.aZ)(this.config))}destroy(){super.destroy()}getDefaultHttpAuthSchemeParametersProvider(){return tt}getIdentityProviderConfigProvider(){return async e=>new e3.K5({"aws.auth#sigv4":e.credentials})}}let ns=(e,t)=>t?class extends e{constructor(e){for(let n of(super(e),t))this.middlewareStack.use(n)}}:e,ni=(e={},t)=>eQ(e,ns(nr,t)),no=(e={},t)=>e0(e,ns(nr,t))}};